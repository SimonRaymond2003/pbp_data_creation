---
title: "Pro Football Focus (PFF) Variable Analysis - 2015"
output:
  html_document:
    toc: true
    toc_float: true
    number_sections: true
date: "2024-12-31"
---


```{r}
library(readr)
library(dplyr)
library(tidyr)
```

# Passing Reports
## Passing Grades
```{r}
passing_grades <- read_csv("yearly_data/2015/passing_summary.csv")
print("Passing Grades Columns:")
print(colnames(passing_grades))
```

## PFF Data Dictionary - Passing Grades

player - Player - The full name of the player in PFF's database
player_id - ID - Unique numerical identifier assigned to each player in PFF's system  
position - POS - Player's primary position during the season
team_name - Team - The NFL team name the player is associated with
franchise_id - Franchise ID - Unique identifier for the NFL franchise
player_game_count - #G - Number of games in which the player appeared
accuracy_percent - ADJ% - Percentage of aimed passes thrown on target (completions + drops / aimed)
aimed_passes - Aimed - Total number of passes intended for a receiver (excludes throwaways, spikes, etc.)
attempts - ATT - Number of times the passer threw the ball
avg_depth_of_target - aDoT - Average depth of target on all attempts
avg_time_to_throw - TTT - Average time to throw on all dropbacks
bats - BAT - Number of passes batted or deflected at the line of scrimmage
big_time_throws - BTT - Pass with excellent ball location and timing, generally thrown further down the field and/or into a tighter window
btt_rate - BTT% - Percentage of attempts that are BTTs
completion_percent - COM% - Percentage of completions to pass attempts
completions - COM - Number of times the passer completed a pass
declined_penalties - PEN - Declined or offsetting penalties
def_gen_pressures - DPR - Total pressures of the passer of any kind (generated by the defense)
drop_rate - DRP% - Percentage of on-target passes dropped by the receiver
dropbacks - DB - Number of times the QB dropped back to pass
drops - DRP - On-target passes dropped by the receiver
first_downs - 1st - Number of first downs
grades_hands_fumble - FUM - PFF grade for hands/fumble
grades_offense - OFF - PFF grade for offense
grades_pass - PASS - PFF grade for pass
grades_run - RUN - PFF grade for rushing
hit_as_threw - HAT - Number of times passer is hit by defender while pass is being thrown
interceptions - INT - Number of interceptions thrown by the passer
passing_snaps - Snaps - Total number of passing plays
penalties - PEN - Total penalties
pressure_to_sack_rate - P2S% - Percentage of pressures turned into sacks
qb_rating - NFL - NFL passer rating
sack_percent - Sack% - Percentage of dropbacks resulting in sacks
sacks - SK - Number of times the passer was sacked
scrambles - SCR - Undesigned runs by the QB
spikes - Spikes - Number of intentional spikes
thrown_aways - TA - Passes intentionally thrown out of play
touchdowns - TD - Number of touchdowns thrown by the passer
turnover_worthy_plays - TWP - Pass that has high percentage chance to be intercepted or poor job of taking care of ball and fumbling
twp_rate - TWP% - Percentage of attempts that are TWP
yards - YDS - Number of yards gained passing
ypa - YPA - Average number of passing yards gained per passing attempt

## Passing Depth
```{r}
passing_depth <- read_csv("yearly_data/2015/passing_depth.csv")
print("Passing Depth Columns:")
print(colnames(passing_depth))
```

## PFF Data Dictionary - Passing Depth

### Base Information
player - Player - Full name of the player
player_id - ID - Unique identifier for the player
position - POS - Player's primary position during the season
team_name - Team - NFL team name
franchise_id - Franchise ID - Unique identifier for the NFL franchise
player_game_count - #G - Number of games played
base_attempts - ATT - Base number of passing attempts
base_dropbacks - DB - Base number of dropbacks
penalties - PEN - Total penalties
declined_penalties - PEN (Declined) - Number of declined penalties

### Depth Pattern Description
The metrics are split into four depth categories:
- behind_los_ (Behind line of scrimmage)
- short_ (0-9 yards)
- medium_ (10-19 yards)
- deep_ (20+ yards)

Each depth category is further split by direction:
- left_
- center_
- right_

### Standard Depth Metrics (shown for deep_, applies to all depths/directions)
deep_accuracy_percent - ADJ% - Percentage of aimed passes thrown on target
deep_aimed_passes - Aimed - Number of intended passes at deep depth
deep_attempts - ATT - Number of deep passing attempts
deep_attempts_percent - ATT% - Percentage of attempts at deep depth
deep_avg_depth_of_target - aDoT - Average depth of target
deep_avg_time_to_throw - TTT - Average time to throw 
deep_bats - BAT - Batted passes at deep depth
deep_big_time_throws - BTT - Number of big time throws at deep depth
deep_btt_rate - BTT% - Big time throw rate at deep depth
deep_completion_percent - COM% - Completion percentage at deep depth
deep_completions - COM - Number of completions at deep depth
deep_def_gen_pressures - DPR - Defensive pressures on deep throws
deep_drop_rate - DRP% - Drop rate at deep depth
deep_dropbacks - DB - Number of dropbacks for deep throws
deep_drops - DRP - Number of drops at deep depth
deep_first_downs - 1st - First downs at deep depth
deep_grades_pass - PASS - PFF passing grade at deep depth
deep_hit_as_threw - HAT - Hit as thrown at deep depth
deep_interceptions - INT - Interceptions at deep depth
deep_passing_snaps - Snaps - Number of passing snaps at deep depth
deep_pressure_to_sack_rate - P2S% - Pressure to sack rate at deep depth
deep_qb_rating - NFL - NFL passer rating at deep depth
deep_sack_percent - Sack% - Sack percentage at deep depth
deep_sacks - SK - Number of sacks on deep attempts
deep_scrambles - SCR - Number of scrambles on deep attempts
deep_spikes - Spikes - Number of spikes at deep depth
deep_thrown_aways - TA - Number of throw aways at deep depth
deep_touchdowns - TD - Touchdowns at deep depth
deep_turnover_worthy_plays - TWP - Turnover worthy plays at deep depth
deep_twp_rate - TWP% - Turnover worthy play rate at deep depth
deep_yards - YDS - Passing yards at deep depth
deep_ypa - YPA - Yards per attempt at deep depth




## Passing Pressure
```{r}
passing_pressure <- read_csv("yearly_data/2015/passing_pressure.csv")
print("Passing Pressure Columns:")
print(colnames(passing_pressure))
```

## PFF Data Dictionary - Passing Pressure

### Base Information
player - Player - Full name of the player
player_id - ID - Unique identifier for the player
position - POS - Player's primary position during the season
team_name - Team - NFL team name
franchise_id - Franchise ID - Unique identifier for the NFL franchise
player_game_count - #G - Number of games played
base_dropbacks - DB - Base number of dropbacks
penalties - PEN - Total penalties
declined_penalties - PEN (Declined) - Number of declined penalties

### Base PFF Grades
grades_offense - OFF - PFF overall offensive grade
grades_pass - PASS - PFF passing grade
grades_run - RUN - PFF rushing grade
grades_hands_fumble - FUM - PFF hands/fumble grade

### Pressure Pattern Description 
The following metrics are repeated with these prefixes:
- pressure_ (Under pressure)
- no_pressure_ (No pressure)
- blitz_ (Against blitz)
- no_blitz_ (No blitz)

### Standard Pressure Metrics (shown for pressure_, applies to all splits)
pressure_accuracy_percent - ADJ% - Percentage of aimed passes thrown on target
pressure_aimed_passes - Aimed - Number of intended passes
pressure_attempts - ATT - Number of passing attempts
pressure_avg_depth_of_target - aDoT - Average depth of target
pressure_avg_time_to_throw - TTT - Average time to throw
pressure_bats - BAT - Batted passes
pressure_big_time_throws - BTT - Big time throws under pressure
pressure_btt_rate - BTT% - Big time throw rate under pressure  
pressure_completion_percent - COM% - Completion percentage
pressure_completions - COM - Number of completions
pressure_def_gen_pressures - DPR - Defensive pressures
pressure_drop_rate - DRP% - Drop rate
pressure_dropbacks - DB - Number of dropbacks
pressure_dropbacks_percent - DB% - Percentage of dropbacks under pressure
pressure_drops - DRP - Number of drops
pressure_first_downs - 1st - First downs
pressure_hit_as_threw - HAT - Hit as thrown
pressure_interceptions - INT - Interceptions
pressure_passing_snaps - Snaps - Number of passing snaps
pressure_pressure_to_sack_rate - P2S% - Pressure to sack rate
pressure_qb_rating - NFL - NFL passer rating
pressure_sack_percent - Sack% - Sack percentage
pressure_sacks - SK - Number of sacks
pressure_scrambles - SCR - Number of scrambles
pressure_spikes - Spikes - Number of spikes 
pressure_thrown_aways - TA - Number of throw aways
pressure_touchdowns - TD - Touchdowns
pressure_turnover_worthy_plays - TWP - Turnover worthy plays
pressure_twp_rate - TWP% - Turnover worthy play rate
pressure_yards - YDS - Passing yards
pressure_ypa - YPA - Yards per attempt

### PFF Grades (shown for pressure_, applies to all splits)
pressure_grades_coverage_defense - COV - PFF coverage defense grade
pressure_grades_defense - DEF - PFF overall defense grade
pressure_grades_defense_penalty - PEN DEF - PFF defensive penalty grade
pressure_grades_hands_drop - DROP - PFF hands/drops grade 
pressure_grades_hands_fumble - FUM - PFF fumble grade
pressure_grades_offense - OFF - PFF overall offense grade
pressure_grades_offense_penalty - PEN OFF - PFF offensive penalty grade
pressure_grades_overall_tackle - TACK - PFF overall tackle grade
pressure_grades_pass - PASS - PFF passing grade
pressure_grades_pass_route - REC - PFF pass route grade
pressure_grades_pass_rush_defense - RUSH - PFF pass rush defense grade
pressure_grades_run - RUN - PFF running grade
pressure_grades_tackle - TACK - PFF tackling grade

## Passing Concept
```{r}
passing_concept <- read_csv("yearly_data/2015/passing_concept.csv")
print("Passing Concept Columns:")
print(colnames(passing_concept))
```

## PFF Data Dictionary - Passing Concept

### Base Information
player - Player - Full name of the player 
player_id - ID - Unique identifier for the player
position - POS - Player's primary position during the season
team_name - Team - NFL team name
franchise_id - Franchise ID - Unique identifier for the NFL franchise
player_game_count - #G - Number of games played
dropbacks - DB - Total number of dropbacks
comp_pct_diff - COM% Diff - Difference in completion percentage between concepts
ypa_diff - YPA Diff - Difference in yards per attempt between concepts
penalties - PEN - Total penalties
declined_penalties - PEN (Declined) - Number of declined penalties

### Concept Pattern Description
The following metrics are repeated with these prefixes:
- screen_ (Screen passes)
- no_screen_ (Non-screen passes)
- pa_ (Play action passes)
- npa_ (Non-play action passes)

### Standard Concept Metrics (shown for screen_, applies to all concepts)
screen_accuracy_percent - ADJ% - Percentage of aimed passes thrown on target
screen_aimed_passes - Aimed - Number of intended passes
screen_attempts - ATT - Number of passing attempts  
screen_avg_depth_of_target - aDoT - Average depth of target
screen_avg_time_to_throw - TTT - Average time to throw
screen_bats - BAT - Batted passes
screen_big_time_throws - BTT - Big time throws on screen plays
screen_btt_rate - BTT% - Big time throw rate on screen plays
screen_completion_percent - COM% - Completion percentage
screen_completions - COM - Number of completions
screen_def_gen_pressures - DPR - Defensive pressures
screen_drop_rate - DRP% - Drop rate
screen_dropbacks - DB - Number of dropbacks
screen_dropbacks_percent - DB% - Percentage of dropbacks that are screens
screen_drops - DRP - Number of drops
screen_first_downs - 1st - First downs
screen_hit_as_threw - HAT - Hit as thrown
screen_interceptions - INT - Interceptions
screen_passing_snaps - Snaps - Number of passing snaps
screen_pressure_to_sack_rate - P2S% - Pressure to sack rate
screen_qb_rating - NFL - NFL passer rating
screen_sack_percent - Sack% - Sack percentage
screen_sacks - SK - Number of sacks
screen_scrambles - SCR - Number of scrambles
screen_spikes - Spikes - Number of spikes
screen_thrown_aways - TA - Number of throw aways 
screen_touchdowns - TD - Touchdowns
screen_turnover_worthy_plays - TWP - Turnover worthy plays
screen_twp_rate - TWP% - Turnover worthy play rate
screen_yards - YDS - Passing yards
screen_ypa - YPA - Yards per attempt

### PFF Grades (shown for screen_, applies to all concepts)
screen_grades_coverage_defense - COV - PFF coverage defense grade
screen_grades_defense - DEF - PFF overall defense grade
screen_grades_defense_penalty - PEN DEF - PFF defensive penalty grade  
screen_grades_hands_drop - DROP - PFF hands/drops grade
screen_grades_hands_fumble - FUM - PFF fumble grade
screen_grades_offense - OFF - PFF overall offense grade
screen_grades_offense_penalty - PEN OFF - PFF offensive penalty grade
screen_grades_overall_tackle - TACK - PFF overall tackle grade
screen_grades_pass - PASS - PFF passing grade
screen_grades_pass_route - REC - PFF pass route grade
screen_grades_pass_rush_defense - RUSH - PFF pass rush defense grade
screen_grades_run - RUN - PFF running grade
screen_grades_run_defense - RUN D - PFF run defense grade
screen_grades_tackle - TACK - PFF tackling grade
## Time In Pocket
```{r}
time_in_pocket <- read_csv("yearly_data/2015/time_in_pocket.csv")
print("Time In Pocket Columns:")
print(colnames(time_in_pocket))
```

## PFF Data Dictionary - Time in Pocket

### Base Information
player - Player - Full name of the player
player_id - ID - Unique identifier for the player
position - POS - Player's primary position during the season
team_name - Team - NFL team name
franchise_id - Franchise ID - Unique identifier for the NFL franchise
player_game_count - #G - Number of games played
dropbacks - DB - Total number of dropbacks

### Time Metrics
avg_time_to_throw - ALL - Average time to throw on all dropbacks
avg_ttt_attempts - ATT - Average time to throw on dropbacks with a pass attempt  
avg_ttt_sacks - SK - Average time to throw on dropbacks with a sack
avg_ttt_scrambles - SCR - Average time to throw on dropbacks with a scramble

### Time Pattern Description
The following metrics are repeated with these prefixes:
- less_ (Less than 2.5 seconds)
- more_ (More than 2.5 seconds)

### Standard Time Metrics (shown for less_, applies to both time splits)
less_accuracy_percent - ADJ% - Percentage of aimed passes thrown on target
less_aimed_passes - Aimed - Number of intended passes
less_attempts - ATT - Number of passing attempts
less_avg_depth_of_target - aDoT - Average depth of target
less_avg_time_to_throw - TTT - Average time to throw
less_bats - BAT - Batted passes
less_big_time_throws - BTT - Big time throws
less_btt_rate - BTT% - Big time throw rate 
less_completion_percent - COM% - Completion percentage
less_completions - COM - Number of completions
less_def_gen_pressures - DPR - Defensive pressures
less_drop_rate - DRP% - Drop rate
less_dropbacks - DB - Number of dropbacks
less_dropbacks_percent - DB% - Percentage of total dropbacks
less_drops - DRP - Number of drops
less_first_downs - 1st - First downs
less_hit_as_threw - HAT - Hit as thrown
less_interceptions - INT - Interceptions
less_passing_snaps - Snaps - Number of passing snaps
less_pressure_to_sack_rate - P2S% - Pressure to sack rate
less_qb_rating - NFL - NFL passer rating
less_sack_percent - Sack% - Sack percentage
less_sacks - SK - Number of sacks
less_scrambles - SCR - Number of scrambles
less_spikes - Spikes - Number of spikes
less_thrown_aways - TA - Number of throw aways
less_touchdowns - TD - Touchdowns
less_turnover_worthy_plays - TWP - Turnover worthy plays
less_twp_rate - TWP% - Turnover worthy play rate
less_yards - YDS - Passing yards
less_ypa - YPA - Yards per attempt

### PFF Grades (shown for less_, applies to both time splits)
less_grades_coverage_defense - COV - PFF coverage defense grade
less_grades_defense - DEF - PFF overall defense grade 
less_grades_defense_penalty - PEN DEF - PFF defensive penalty grade
less_grades_hands_drop - DROP - PFF hands/drops grade
less_grades_hands_fumble - FUM - PFF fumble grade
less_grades_offense - OFF - PFF overall offense grade
less_grades_offense_penalty - PEN OFF - PFF offensive penalty grade
less_grades_overall_tackle - TACK - PFF overall tackle grade
less_grades_pass - PASS - PFF passing grade
less_grades_pass_route - REC - PFF pass route grade
less_grades_pass_rush_defense - RUSH - PFF pass rush defense grade
less_grades_run - RUN - PFF running grade
less_grades_run_defense - RUN D - PFF run defense grade
less_grades_tackle - TACK - PFF tackling grade

## Allowed Pressure
```{r}
allowed_pressure <- read_csv("yearly_data/2015/passing_allowed_pressure.csv")
print("Allowed Pressure Columns:")
print(colnames(allowed_pressure))
```

## PFF Data Dictionary - Allowed Pressure 

### Base Information
player - Player - Full name of the player
player_id - ID - Unique identifier for the player
position - POS - Player's primary position during the season
team_name - Team - NFL team name
franchise_id - Franchise ID - Unique identifier for the NFL franchise
player_game_count - #G - Number of games played
penalties - PEN - Total penalties
declined_penalties - PEN (Declined) - Number of declined penalties

### Pressure Counts
allowed_pressure_dropbacks - APDB - Number of dropbacks when under pressure
sacks_allowed - SK - Number of sacks allowed
hits_allowed - HIT - Number of QB hits allowed
hurries_allowed - HUR - Number of QB hurries allowed  
pressures_allowed - PR - Total number of pressures allowed

### Pressure Distribution
pressures_self - Self - Pressures charged to the QB
pressures_ol_te - OL/TE - Pressures charged to offensive line/tight ends
pressures_lt - LT - Pressures charged to left tackle
pressures_lg - LG - Pressures charged to left guard
pressures_ce - C - Pressures charged to center
pressures_rg - RG - Pressures charged to right guard
pressures_rt - RT - Pressures charged to right tackle
pressures_te - TE - Pressures charged to tight end
pressures_other - OTH - Pressures charged to other players
pressures_off - OFF - Pressures charged to offense

### Pressure Percentages 
self_percent - QB% - Percentage of pressures charged to QB
ol_te_percent - OL% - Percentage of pressures charged to OL/TE
lt_percent - LT% - Percentage of pressures charged to left tackle
lg_percent - LG% - Percentage of pressures charged to left guard
ce_percent - C% - Percentage of pressures charged to center
rg_percent - RG% - Percentage of pressures charged to right guard
rt_percent - RT% - Percentage of pressures charged to right tackle
te_percent - TE% - Percentage of pressures charged to tight end
other_percent - OTH% - Percentage of pressures charged to other players

# Receiving Reports
## Receiving Grades
```{r}
receiving_grades <- read_csv("yearly_data/2015/receiving_summary.csv")
print("Receiving Grades Columns:")
print(colnames(receiving_grades))
```

## PFF Data Dictionary - Receiving Grades

### Base Information
player - Player - Full name of the player
player_id - ID - Unique identifier for the player
position - POS - Player's primary position during the season
team_name - Team - NFL team name
franchise_id - Franchise ID - Unique identifier for the NFL franchise
player_game_count - #G - Number of games played
penalties - PEN - Total penalties
declined_penalties - PEN (Declined) - Number of declined penalties

### Core Receiving Stats
targets - TGT - Number of times targeted
receptions - REC - Number of receptions
caught_percent - REC% - Percentage of targets caught
yards - YDS - Total receiving yards
yards_per_reception - Y/REC - Yards per reception
touchdowns - TD - Receiving touchdowns
first_downs - 1st - First downs
longest - LNG - Longest reception

### Advanced Receiving Stats
avg_depth_of_target - aDoT - Average depth of target
yards_after_catch - YAC - Total yards after catch
yards_after_catch_per_reception - YAC/REC - Yards after catch per reception
yprr - Y/RR - Yards per route run
drops - DRP - Number of drops
drop_rate - DRP% - Drop rate percentage
contested_targets - CTT - Number of contested targets
contested_receptions - CTC - Number of contested catches
contested_catch_rate - CTC% - Contested catch rate percentage
interceptions - INT - Interceptions on targets
fumbles - FUM - Number of fumbles
avoided_tackles - MTF - Missed tackles forced after reception
targeted_qb_rating - RTG - QB passer rating when targeting this receiver

### Alignment Stats
pass_plays - PASS - Snaps on pass plays
routes - RECV - Routes run
route_rate - RT% - Percentage of pass plays running routes
pass_blocks - PBLK - Pass blocking snaps
pass_block_rate - PB% - Pass blocking percentage
slot_snaps - SLOT - Snaps in slot
slot_rate - SLT% - Percentage of snaps in slot
wide_snaps - WIDE - Snaps out wide
wide_rate - WID% - Percentage of snaps wide
inline_snaps - INL - Snaps inline
inline_rate - INL% - Percentage of snaps inline

### PFF Grades
grades_offense - OFF - PFF overall offense grade
grades_pass_route - RECV - PFF pass route grade
grades_hands_drop - DROP - PFF hands/drops grade
grades_hands_fumble - FUM - PFF fumble grade
grades_pass_block - PBLK - PFF pass blocking grade

## Receiving Depth
```{r}
receiving_depth <- read_csv("yearly_data/2015/receiving_depth.csv")
print("Receiving Depth Columns:")
print(colnames(receiving_depth))
```

## PFF Data Dictionary - Receiving Depth

### Base Information
player - Player - Full name of the player
player_id - ID - Unique identifier for the player
position - POS - Player's primary position during the season 
team_name - Team - NFL team name
franchise_id - Franchise ID - Unique identifier for the NFL franchise
player_game_count - #G - Number of games played
base_targets - TGT - Base number of targets
penalties - PEN - Total penalties
declined_penalties - PEN (Declined) - Number of declined penalties

### Depth Pattern Description
The metrics are split into four depth categories:
- behind_los_ (Behind line of scrimmage)
- short_ (0-9 yards)
- medium_ (10-19 yards) 
- deep_ (20+ yards)

Each depth category is further split by direction:
- left_
- center_
- right_

### Standard Depth Metrics (shown for deep_, applies to all depths/directions)
deep_targets - TGT - Number of targets at deep depth
deep_targets_percent - TGT% - Percentage of targets at deep depth
deep_receptions - REC - Number of receptions at deep depth
deep_caught_percent - REC% - Percentage of targets caught at deep depth
deep_yards - YDS - Receiving yards at deep depth
deep_yards_per_reception - Y/REC - Yards per reception at deep depth
deep_touchdowns - TD - Touchdowns at deep depth
deep_grades_pass_route - RECV - PFF pass route grade at deep depth
deep_grades_hands_drop - DROP - PFF hands/drop grade at deep depth
deep_yards_after_catch - YAC - Yards after catch at deep depth
deep_yards_after_catch_per_reception - YAC/REC - Yards after catch per reception at deep depth
deep_yprr - Y/RR - Yards per route run at deep depth
deep_avg_depth_of_target - aDoT - Average depth of target at deep depth
deep_drops - DRP - Number of drops at deep depth
deep_drop_rate - DRP% - Drop rate at deep depth
deep_contested_targets - CTT - Contested targets at deep depth
deep_contested_receptions - CTC - Contested catches at deep depth
deep_contested_catch_rate - CTC% - Contested catch rate at deep depth
deep_interceptions - INT - Interceptions at deep depth
deep_fumbles - FUM - Fumbles at deep depth
deep_avoided_tackles - MTF - Missed tackles forced at deep depth
deep_first_downs - 1st - First downs at deep depth
deep_targeted_qb_rating - RTG - QB rating when targeted at deep depth

### Additional Metrics (shown for deep_, applies to all depths/directions)
deep_longest - LNG - Longest reception at deep depth
deep_pass_plays - Snaps - Number of pass plays
deep_routes - Routes - Routes run
deep_route_rate - RT% - Route percentage 
deep_pass_blocks - PBLK - Pass blocking snaps
deep_pass_block_rate - PB% - Pass block rate

## Receiving Concept
```{r}
receiving_concept <- read_csv("yearly_data/2015/receiving_concept.csv")
print("Receiving Concept Columns:")
print(colnames(receiving_concept))
```

## PFF Data Dictionary - Receiving Concept

### Base Information
player - Player - Full name of the player
player_id - ID - Unique identifier for the player
position - POS - Player's primary position during the season
team_name - Team - NFL team name
franchise_id - Franchise ID - Unique identifier for the NFL franchise
player_game_count - #G - Number of games played
base_targets - TGT - Base number of targets
penalties - PEN - Total penalties
declined_penalties - PEN (Declined) - Number of declined penalties

### Concept Pattern Description
The metrics are split into these concepts:
- screen_ (Screen passes)
- slot_ (Passes when lined up in slot)

### Standard Concept Metrics (shown for screen_, applies to all concepts)
screen_targets - TGT - Number of targets on screens
screen_targets_percent - TGT% - Percentage of targets that are screens
screen_receptions - REC - Number of receptions on screens
screen_caught_percent - REC% - Percentage of screen targets caught
screen_yards - YDS - Receiving yards on screens
screen_yards_per_reception - Y/REC - Yards per reception on screens
screen_touchdowns - TD - Touchdowns on screens
screen_grades_pass_route - RECV - PFF pass route grade on screens
screen_grades_hands_drop - DROP - PFF hands/drop grade on screens
screen_yards_after_catch - YAC - Yards after catch on screens
screen_yards_after_catch_per_reception - YAC/REC - Yards after catch per reception on screens
screen_yprr - Y/RR - Yards per route run on screens
screen_avg_depth_of_target - aDoT - Average depth of target on screens
screen_drops - DRP - Number of drops on screens
screen_drop_rate - DRP% - Drop rate on screens
screen_contested_targets - CTT - Contested targets on screens
screen_contested_receptions - CTC - Contested catches on screens
screen_contested_catch_rate - CTC% - Contested catch rate on screens
screen_interceptions - INT - Interceptions on screens
screen_fumbles - FUM - Fumbles on screens
screen_avoided_tackles - MTF - Missed tackles forced on screens
screen_first_downs - 1st - First downs on screens
screen_targeted_qb_rating - RTG - QB rating when targeted on screens

### Additional Metrics (shown for screen_, applies to all concepts)
screen_longest - LNG - Longest reception on screens
screen_pass_plays - Snaps - Number of pass plays
screen_routes - Routes - Routes run
screen_route_rate - RT% - Route percentage
screen_pass_blocks - PBLK - Pass blocking snaps
screen_pass_block_rate - PB% - Pass block rate


## Receiving vs Scheme
```{r}
receiving_vs_scheme <- read_csv("yearly_data/2015/receiving_scheme.csv")
print("Receiving vs Scheme Columns:")
print(colnames(receiving_vs_scheme))
```

## PFF Data Dictionary - Receiving vs Scheme

### Base Information
player - Player - Full name of the player
player_id - ID - Unique identifier for the player
position - POS - Player's primary position during the season
team_name - Team - NFL team name
franchise_id - Franchise ID - Unique identifier for the NFL franchise
player_game_count - #G - Number of games played
base_targets - TGT - Base number of targets
penalties - PEN - Total penalties
declined_penalties - PEN (Declined) - Number of declined penalties

### Coverage Pattern Description
The metrics are split into coverage types:
- man_ (Against man coverage)
- zone_ (Against zone coverage)

### Standard Coverage Metrics (shown for man_, applies to both coverages)
man_targets - TGT - Number of targets against man coverage
man_targets_percent - TGT% - Percentage of targets against man coverage
man_receptions - REC - Number of receptions against man coverage
man_caught_percent - REC% - Percentage of targets caught against man coverage
man_yards - YDS - Receiving yards against man coverage
man_yards_per_reception - Y/REC - Yards per reception against man coverage
man_touchdowns - TD - Touchdowns against man coverage
man_grades_pass_route - RECV - PFF pass route grade against man coverage
man_grades_hands_drop - DROP - PFF hands/drop grade against man coverage
man_yards_after_catch - YAC - Yards after catch against man coverage
man_yards_after_catch_per_reception - YAC/REC - Yards after catch per reception against man coverage
man_yprr - Y/RR - Yards per route run against man coverage
man_avg_depth_of_target - aDoT - Average depth of target against man coverage
man_drops - DRP - Number of drops against man coverage
man_drop_rate - DRP% - Drop rate against man coverage
man_contested_targets - CTT - Contested targets against man coverage
man_contested_receptions - CTC - Contested catches against man coverage
man_contested_catch_rate - CTC% - Contested catch rate against man coverage
man_interceptions - INT - Interceptions against man coverage
man_fumbles - FUM - Fumbles against man coverage
man_avoided_tackles - MTF - Missed tackles forced against man coverage
man_first_downs - 1st - First downs against man coverage
man_targeted_qb_rating - RTG - QB rating when targeted against man coverage

### Additional Metrics (shown for man_, applies to both coverages)
man_longest - LNG - Longest reception against man coverage
man_pass_plays - Snaps - Number of pass plays
man_routes - Routes - Routes run
man_route_rate - RT% - Route percentage
man_pass_blocks - PBLK - Pass blocking snaps
man_pass_block_rate - PB% - Pass block rate


# Rushing Reports
## Rushing Grades
```{r}
rushing_grades <- read_csv("yearly_data/2015/rushing_summary.csv")
print("Rushing Grades Columns:")
print(colnames(rushing_grades))
```

## PFF Data Dictionary - Rushing Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games played  
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined penalties  

### Rushing Metrics
attempts - ATT - Designed rushing attempts  
yards - YDS - Total rushing yards  
yards_after_contact - YCO - Yards after contact  
yco_attempt - YCO/A - Yards after contact per attempt  
touchdowns - TD - Rushing touchdowns  
avoided_tackles - MTF - Missed tackles forced after a rush  
longest - LNG - Longest rushing attempt  
breakaway_attempts - D15+ - Designed rushing attempts more than 15 yards  
breakaway_yards - BAY - Yardage accumulated on runs more than 15 yards  
breakaway_percent - BAY% - Breakaway percentage (15+ yards runs / total attempts)  
first_downs - 1st - First downs gained on rushing attempts  
zone_attempts - ZONE - Designed rushing attempts in zone-blocking schemes  
gap_attempts - GAP - Designed rushing attempts in gap-blocking schemes  

### Elusive Metrics
elusive_rating - ELU - PFF signature stat measuring success of a runner independent of blocking  
elu_yco - YCO - Yards after contact for elusive plays  
elu_rush_mtf - MTF - Missed tackles forced on elusive rush attempts  
elu_recv_mtf - MTF - Missed tackles forced on elusive receptions  

### Receiving Metrics
targets - TGT - Receiving targets  
receptions - REC - Number of receptions  
rec_yards - YDS - Receiving yards  
routes - RSNP - Snaps where running a receiving route  
yprr - Y/RR - Yards per route run  

### Blocking Metrics
grades_run_block - RBLK - PFF grade for run blocking  
grades_pass_block - PBLK - PFF grade for pass blocking  

### Fumbles and Drops
fumbles - FUM - Total fumbles  
grades_hands_fumble - FUM - PFF grade for hands/fumble  
drops - DRP - On-target passes dropped by the receiver  

### Grades
grades_offense - OFF - PFF grade for offense  
grades_run - RUN - PFF grade for rushing  
grades_pass - PASS - PFF grade for passing  
grades_pass_route - RECV - PFF grade for pass routes  
grades_offense_penalty - PEN OFF - PFF offensive penalty grade  


# Blocking Reports
## Blocking Grades
```{r}
blocking_grades <- read_csv("yearly_data/2015/offense_blocking.csv")
print("Blocking Grades Columns:")
print(colnames(blocking_grades))
```

## PFF Data Dictionary - Blocking Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
snap_counts_offense - OFF - Total offensive snaps  
snap_counts_block - BLK - Total blocking snaps  
snap_counts_run_block - RBLK - Snaps in a run-blocking role  
snap_counts_pass_block - PBLK - Pass-blocking snaps  
snap_counts_pass_play - PASS - Snaps on passing plays  
snap_counts_lt - LT - Number of snaps lined up at Left Tackle  
snap_counts_lg - LG - Number of snaps lined up at Left Guard  
snap_counts_ce - C - Number of snaps lined up at Center  
snap_counts_rg - RG - Number of snaps lined up at Right Guard  
snap_counts_rt - RT - Number of snaps lined up at Right Tackle  
snap_counts_te - ITE - Number of snaps lined up as an inline Tight End  

### Blocking Metrics
block_percent - BLK% - Percentage of total snaps spent blocking  
pass_block_percent - PBLK% - Percentage of snaps spent pass blocking  
non_spike_pass_block - OPP - Allowed pressure opportunities (non-spike, non-penalty passing snaps)  
non_spike_pass_block_percentage - OPP% - Percentage of non-spike, non-penalty passing snaps with an opportunity to allow pressure  

### Pressure Metrics
sacks_allowed - SK - Sacks allowed  
hits_allowed - HIT - QB hits allowed  
hurries_allowed - HUR - QB hurries allowed  
pressures_allowed - PR - Total QB pressures allowed  
pbe - EFF - Pass-blocking efficiency (PFF signature stat, weighted toward sacks allowed)  

### Grades
grades_offense - OFF - PFF grade for offense  
grades_run_block - RBLK - PFF grade for run blocking  
grades_pass_block - PBLK - PFF grade for pass blocking  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  


## Pass Blocking
```{r}
pass_blocking <- read_csv("yearly_data/2015/offense_pass_blocking.csv")
print("Pass Blocking Columns:")
print(colnames(pass_blocking))
```

## PFF Data Dictionary - Pass Blocking

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
snap_counts_pass_block - PBLK - Total pass-blocking snaps  
snap_counts_pass_play - PASS - Snaps lined up on the field on pass plays  

### Blocking Metrics
pass_block_percent - PB% - Percentage of snaps spent pass blocking  
non_spike_pass_block - OPP - Allowed pressure opportunities (non-spike, non-penalty passing snaps)  
non_spike_pass_block_percentage - OPP% - Percentage of non-spike, non-penalty passing snaps with an opportunity to allow pressure  

### Pressure Metrics
sacks_allowed - SK - Sacks allowed  
hits_allowed - HIT - QB hits allowed  
hurries_allowed - HUR - QB hurries allowed  
pressures_allowed - PR - Total QB pressures allowed  
pbe - EFF - Pass-blocking efficiency (PFF signature stat, weighted toward sacks allowed)  

### True Pass Set Metrics
true_pass_set_grades_pass_block - PBLK - PFF grade for pass blocking in true pass sets  
true_pass_set_hits_allowed - HIT - QB hits allowed in true pass sets  
true_pass_set_hurries_allowed - HUR - QB hurries allowed in true pass sets  
true_pass_set_non_spike_pass_block - OPP - Allowed pressure opportunities in true pass sets  
true_pass_set_non_spike_pass_block_percentage - OPP% - Percentage of non-spike, non-penalty passing snaps with an opportunity to allow pressure in true pass sets  
true_pass_set_pass_block_percent - PB% - Percentage of pass-blocking snaps in true pass sets  
true_pass_set_pbe - EFF - Pass-blocking efficiency in true pass sets  
true_pass_set_pressures_allowed - PR - Total QB pressures allowed in true pass sets  
true_pass_set_sacks_allowed - SK - Sacks allowed in true pass sets  
true_pass_set_snap_counts_pass_block - PBLK - Total pass-blocking snaps in true pass sets  
true_pass_set_snap_counts_pass_play - PASS - Snaps lined up on the field on pass plays in true pass sets  

### Grades
grades_pass_block - PBLK - PFF grade for pass blocking  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  


## Run Blocking
```{r}
run_blocking <- read_csv("yearly_data/2015/offense_run_blockng.csv")
print("Run Blocking Columns:")
print(colnames(run_blocking))
```

## PFF Data Dictionary - Run Blocking

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
snap_counts_run_block - RBLK - Total run-blocking snaps  
snap_counts_run_play - RUN - Total snaps lined up on the field on run plays  

### Blocking Metrics
run_block_percent - RB% - Percentage of snaps spent run blocking  
grades_run_block - RBLK - PFF grade for run blocking  

### Zone Blocking Metrics
zone_grades_run_block - RBLK - PFF grade for zone run blocking  
zone_run_block_percent - SNP% - Percentage of snaps spent zone run blocking  
zone_snap_counts_run_block - RBLK - Total zone run-blocking snaps  
zone_snap_counts_run_block_percent - SNP% - Percentage of snaps spent zone run blocking  
zone_snap_counts_run_play - RUN - Total snaps lined up on the field for zone run plays  

### Gap Blocking Metrics
gap_grades_run_block - RBLK - PFF grade for gap run blocking  
gap_run_block_percent - SNP% - Percentage of snaps spent gap run blocking  
gap_snap_counts_run_block - RBLK - Total gap run-blocking snaps  
gap_snap_counts_run_block_percent - SNP% - Percentage of snaps spent gap run blocking  
gap_snap_counts_run_play - RUN - Total snaps lined up on the field for gap run plays  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  


# Defense Reports
## Defense Grades
```{r}
defensive_grades <- read_csv("yearly_data/2015/defense_summary.csv")
print("Defense Grades Columns:")
print(colnames(defensive_grades))
```

## PFF Data Dictionary - Defense Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
snap_counts_defense - TOT - Total defensive snaps  
snap_counts_run_defense - RDEF - Snaps in a run defense role  
snap_counts_pass_rush - PRSH - Pass rush snaps  
snap_counts_coverage - COV - Coverage snaps  
snap_counts_box - Box - Snaps lined up in the box  
snap_counts_dl - DL - Snaps lined up on the defensive line  
snap_counts_dl_a_gap - AGP - Snaps lined up on the defensive line as a nose tackle (A-gap)  
snap_counts_dl_b_gap - BGP - Snaps lined up on the defensive line as a defensive tackle (B-gap)  
snap_counts_dl_over_t - OVT - Snaps lined up on the defensive line over an offensive tackle  
snap_counts_dl_outside_t - OUT - Snaps lined up on the defensive line outside the offensive tackle  
snap_counts_fs - FS - Snaps lined up at free safety  
snap_counts_slot - Slot - Snaps lined up at slot corner  
snap_counts_corner - Cnr - Snaps lined up at cornerback  
snap_counts_offball - Offball - Off-ball linebacker snaps  

### Tackling Metrics
tackles - TKL - Total tackles  
assists - AST - Assisted tackles  
missed_tackles - MIS - Missed tackles  
missed_tackle_rate - MIS% - Missed tackle rate  
stops - STOP - Defensive stops (tackles that result in an offensive failure)  
tackles_for_loss - TFL - Tackles for loss  

### Coverage Metrics
targets - TGT - Receiving targets against the defender  
receptions - REC - Receptions allowed  
catch_rate - REC% - Percentage of targets caught  
yards - YDS - Receiving yards allowed  
yards_per_reception - Y/REC - Yards per reception allowed  
yards_after_catch - YAC - Yards after catch allowed  
longest - LNG - Longest reception allowed  
touchdowns - TD - Receiving touchdowns allowed  
interceptions - INT - Interceptions made  
interception_touchdowns - INT TD - Interception return touchdowns  
pass_break_ups - PBU - Pass breakups  
qb_rating_against - NFL - NFL passer rating against  

### Pass Rush Metrics
sacks - SK - Sacks generated  
hits - HIT - QB hits generated  
hurries - HUR - QB hurries generated  
total_pressures - TOT - Total pressures of the passer  

### Fumbles and Safeties
forced_fumbles - FFM - Forced fumbles  
fumble_recoveries - FR - Fumble recoveries  
fumble_recovery_touchdowns - FR TD - Fumble recovery touchdowns  
safeties - SAF - Safeties scored  

### Other Metrics
batted_passes - BAT - Passes batted or deflected at the line of scrimmage  

### Grades
grades_defense - DEF - PFF grade for overall defense  
grades_run_defense - RDEF - PFF grade for run defense  
grades_pass_rush_defense - PRSH - PFF grade for pass rushing  
grades_coverage_defense - COV - PFF grade for defensive coverage against receivers  
grades_tackle - TACK - PFF grade for tackling  
grades_defense_penalty - PEN DEF - PFF grade for defensive penalties  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  


## Pass Rush Grades
```{r}
pass_rush_grades <- read_csv("yearly_data/2015/pass_rush_summary.csv")
print("Pass Rush Grades Columns:")
print(colnames(pass_rush_grades))
```

## PFF Data Dictionary - Pass Rush Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
snap_counts_pass_play - PASS - Total snaps lined up on the field on pass plays  
snap_counts_pass_rush - PRSH - Total pass rush snaps  

### Pass Rush Metrics
pass_rush_opp - OPP - Pass rush opportunities (non-penalty snaps)  
pass_rush_percent - RSH% - Percentage of pass rush snaps per passing snap played  
pass_rush_win_rate - WIN% - Percentage of "wins" against blocking on pass rush snaps  
pass_rush_wins - WINS - Total pass rush wins  
prp - PRP - Pass rush productivity (combines sacks, hits, and hurries relative to pass rush attempts)  
sacks - SK - Total sacks  
hits - HIT - QB hits generated  
hurries - HUR - QB hurries generated  
total_pressures - TOT - Total pressures of the passer of any kind (generated by the defense)  
batted_passes - BAT - Number of passes batted or deflected at the line of scrimmage  

### True Pass Set Metrics
true_pass_set_snap_counts_pass_play - PASS - Total pass play snaps in true pass sets  
true_pass_set_snap_counts_pass_rush - PRSH - Total pass rush snaps in true pass sets  
true_pass_set_pass_rush_opp - OPP - Pass rush opportunities in true pass sets  
true_pass_set_pass_rush_percent - RSH% - Percentage of pass rush snaps in true pass sets  
true_pass_set_pass_rush_win_rate - WIN% - Pass rush win percentage in true pass sets  
true_pass_set_pass_rush_wins - WINS - Total pass rush wins in true pass sets  
true_pass_set_prp - PRP - Pass rush productivity in true pass sets  
true_pass_set_sacks - SK - Sacks in true pass sets  
true_pass_set_hits - HIT - QB hits in true pass sets  
true_pass_set_hurries - HUR - QB hurries in true pass sets  
true_pass_set_total_pressures - TOT - Total pressures in true pass sets  
true_pass_set_batted_passes - BAT - Batted passes in true pass sets  
true_pass_set_grades_pass_rush_defense - PRSH - PFF pass rush grade in true pass sets  

### Grades
grades_pass_rush_defense - PRSH - PFF grade for pass rushing  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  


## Run Defense Grades
```{r}
run_defense_grades <- read_csv("yearly_data/2015/run_defense_summary.csv")
print("Run Defense Grades Columns:")
print(colnames(run_defense_grades))
```

## PFF Data Dictionary - Run Defense Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
snap_counts_run - RDEF - Total snaps in a run defense role  

### Tackling Metrics
tackles - TKL - Total tackles  
assists - AST - Assisted tackles  
missed_tackles - MIS - Missed tackles  
missed_tackle_rate - MIS% - Missed tackle rate  
avg_depth_of_tackle - AVDT - Average depth of tackle  

### Defensive Stops
stops - STOP - Defensive stops (tackles that constitute a "failure" for the offense)  
stop_percent - STOP% - Percentage of run defense snaps where the player was responsible for a stop  
run_stop_opp - OPP - Opportunities for run stops  

### Fumbles
forced_fumbles - FFM - Forced fumbles  

### Grades
grades_run_defense - RDEF - PFF grade for run defense  
grades_tackle - TKL - PFF grade for tackling  
grades_defense - DEF - PFF grade for overall defense  
grades_coverage_defense - COV - PFF grade for defensive coverage against receivers  
grades_pass_rush_defense - PRSH - PFF grade for pass rushing  
grades_defense_penalty - PEN DEF - PFF grade for defensive penalties  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  


## Coverage Grades
```{r}
coverage_grades <- read_csv("yearly_data/2015/defense_coverage_summary.csv")
print("Coverage Grades Columns:")
print(colnames(coverage_grades))
```

## PFF Data Dictionary - Coverage Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
snap_counts_pass_play - PASS - Total snaps lined up on the field on pass plays  
snap_counts_coverage - COV - Total coverage snaps  

### Coverage Metrics
targets - TGT - Receiving targets against the defender  
receptions - REC - Receptions allowed  
catch_rate - REC% - Percentage of targets caught  
yards - YDS - Receiving yards allowed  
yards_per_reception - Y/REC - Yards per reception allowed  
yards_after_catch - YAC - Yards after catch allowed  
avg_depth_of_target - aDoT - Average depth of target against  
longest - LNG - Longest reception allowed  
coverage_percent - COV% - Percentage of coverage snaps per passing snap played  
coverage_snaps_per_target - S/TGT - Coverage snaps per target  
coverage_snaps_per_reception - S/REC - Coverage snaps per reception  
yards_per_coverage_snap - Y/COV - Yards allowed per coverage snap  

### Defensive Plays
interceptions - INT - Interceptions made  
dropped_ints - DRI - Dropped interceptions  
forced_incompletes - FI - Forced incompletions  
forced_incompletion_rate - FI% - Forced incompletions per target  
pass_break_ups - PBU - Pass breakups  
qb_rating_against - NFL - NFL passer rating against  
touchdowns - TD - Receiving touchdowns allowed  

### Tackling Metrics
tackles - TKL - Total tackles  
assists - AST - Assisted tackles  
missed_tackles - MIS - Missed tackles  
missed_tackle_rate - MIS% - Missed tackle rate  
stops - STOP - Defensive stops (tackles that constitute a "failure" for the offense)  

### Grades
grades_coverage_defense - COV - PFF grade for defensive coverage against receivers  
grades_defense - DEF - PFF grade for overall defense  
grades_run_defense - RDEF - PFF grade for run defense  
grades_pass_rush_defense - PRSH - PFF grade for pass rushing  
grades_tackle - TKL - PFF grade for tackling  
grades_defense_penalty - PEN DEF - PFF grade for defensive penalties  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  

## Coverage Scheme
```{r}
coverage_schemes <- read_csv("yearly_data/2015/defense_coverage_scheme.csv")
print("Coverage Scheme Columns:")
print(colnames(coverage_schemes))
```

## PFF Data Dictionary - Coverage Scheme

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
base_snap_counts_coverage - COV - Total coverage snaps  
man_snap_counts_coverage - MAN - Total coverage snaps in man coverage  
man_snap_counts_coverage_percent - MAN% - Percentage of coverage snaps in man coverage  
man_snap_counts_pass_play - PASS - Total snaps lined up on pass plays in man coverage  
zone_snap_counts_coverage - ZONE - Total coverage snaps in zone coverage  
zone_snap_counts_coverage_percent - ZONE% - Percentage of coverage snaps in zone coverage  
zone_snap_counts_pass_play - PASS - Total snaps lined up on pass plays in zone coverage  

### Man Coverage Metrics
man_targets - TGT - Receiving targets in man coverage  
man_receptions - REC - Receptions allowed in man coverage  
man_catch_rate - REC% - Percentage of targets caught in man coverage  
man_yards - YDS - Receiving yards allowed in man coverage  
man_yards_per_reception - Y/REC - Yards per reception allowed in man coverage  
man_yards_after_catch - YAC - Yards after catch allowed in man coverage  
man_avg_depth_of_target - aDoT - Average depth of target in man coverage  
man_yards_per_coverage_snap - Y/COV - Yards allowed per coverage snap in man coverage  
man_coverage_snaps_per_target - S/TGT - Coverage snaps per target in man coverage  
man_coverage_snaps_per_reception - S/REC - Coverage snaps per reception in man coverage  
man_longest - LNG - Longest reception allowed in man coverage  
man_forced_incompletes - FI - Forced incompletions in man coverage  
man_forced_incompletion_rate - FI% - Forced incompletions per target in man coverage  
man_dropped_ints - DRI - Dropped interceptions in man coverage  
man_interceptions - INT - Interceptions made in man coverage  
man_pass_break_ups - PBU - Pass breakups in man coverage  
man_qb_rating_against - NFL - NFL passer rating against in man coverage  
man_touchdowns - TD - Receiving touchdowns allowed in man coverage  
man_tackles - TKL - Total tackles in man coverage  
man_assists - AST - Assisted tackles in man coverage  
man_missed_tackles - MIS - Missed tackles in man coverage  
man_missed_tackle_rate - MIS% - Missed tackle rate in man coverage  
man_stops - STOP - Defensive stops in man coverage  

### Zone Coverage Metrics
zone_targets - TGT - Receiving targets in zone coverage  
zone_receptions - REC - Receptions allowed in zone coverage  
zone_catch_rate - REC% - Percentage of targets caught in zone coverage  
zone_yards - YDS - Receiving yards allowed in zone coverage  
zone_yards_per_reception - Y/REC - Yards per reception allowed in zone coverage  
zone_yards_after_catch - YAC - Yards after catch allowed in zone coverage  
zone_avg_depth_of_target - aDoT - Average depth of target in zone coverage  
zone_yards_per_coverage_snap - Y/COV - Yards allowed per coverage snap in zone coverage  
zone_coverage_snaps_per_target - S/TGT - Coverage snaps per target in zone coverage  
zone_coverage_snaps_per_reception - S/REC - Coverage snaps per reception in zone coverage  
zone_longest - LNG - Longest reception allowed in zone coverage  
zone_forced_incompletes - FI - Forced incompletions in zone coverage  
zone_forced_incompletion_rate - FI% - Forced incompletions per target in zone coverage  
zone_dropped_ints - DRI - Dropped interceptions in zone coverage  
zone_interceptions - INT - Interceptions made in zone coverage  
zone_pass_break_ups - PBU - Pass breakups in zone coverage  
zone_qb_rating_against - NFL - NFL passer rating against in zone coverage  
zone_touchdowns - TD - Receiving touchdowns allowed in zone coverage  
zone_tackles - TKL - Total tackles in zone coverage  
zone_assists - AST - Assisted tackles in zone coverage  
zone_missed_tackles - MIS - Missed tackles in zone coverage  
zone_missed_tackle_rate - MIS% - Missed tackle rate in zone coverage  
zone_stops - STOP - Defensive stops in zone coverage  

### Grades
man_grades_coverage_defense - COV - PFF grade for defensive coverage in man coverage  
zone_grades_coverage_defense - COV - PFF grade for defensive coverage in zone coverage  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  

## Slot Coverage
```{r}
slot_coverage <- read_csv("yearly_data/2015/slot_coverage.csv")
print("Slot Coverage Columns:")
print(colnames(slot_coverage))
```

## PFF Data Dictionary - Slot Coverage

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
coverage_snaps - COV - Total coverage snaps in the slot  
coverage_snaps_per_target - S/TGT - Coverage snaps per target in the slot  
coverage_snaps_per_reception - S/REC - Coverage snaps per reception in the slot  

### Coverage Metrics
targets - TGT - Receiving targets in the slot  
receptions - REC - Receptions allowed in the slot  
yards - YDS - Receiving yards allowed in the slot  
yards_per_coverage_snap - Y/SNP - Yards allowed per coverage snap in the slot  
yards_after_catch - YAC - Yards after catch allowed in the slot  
touchdowns - TD - Receiving touchdowns allowed in the slot  
interceptions - INT - Interceptions made in the slot  
qb_rating_against - NFL - NFL passer rating against in the slot  

## Pass Rushing Productivity
```{r}
pass_rushing_productivity <- read_csv("yearly_data/2015/pass_rush_productivity.csv")
print("Pass Rushing Productivity Columns:")
print(colnames(pass_rushing_productivity))
```

## PFF Data Dictionary - Pass Rushing Productivity

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
pass_snaps - PASS - Total pass snaps  
pass_rush_snaps - PRSH - Total pass rush snaps  
pass_rush_percent - RSH% - Percentage of pass rush snaps per passing snap  

### Pass Rushing Metrics
pressures - DPR - Total pressures generated on the passer (sacks, hits, and hurries)  
prp - PRP - Pass rushing productivity (combines sacks, hits, and hurries relative to pass rush attempts)  
sacks - SK - Total sacks  
hits - HIT - QB hits generated  
hurries - HUR - QB hurries generated  
misses - MIS - Missed pressure opportunities  
stops - STOP - Defensive stops on pass plays  
tackles - TKL - Tackles made on pass plays  

### Left-Hand Side (LHS) Metrics
lhs_pass_rush_snaps - PRSH - Pass rush snaps on the left side  
lhs_pass_rush_percent - RSH% - Percentage of pass rush snaps on the left side  
lhs_pressures - DPR - Total pressures generated on the left side  
lhs_prp - PRP - Pass rushing productivity on the left side  
lhs_sacks - SK - Sacks on the left side  
lhs_hits - HIT - QB hits on the left side  
lhs_hurries - HUR - QB hurries on the left side  
lhs_misses - MIS - Missed pressures on the left side  
lhs_stops - STOP - Defensive stops on the left side  
lhs_tackles - TKL - Tackles on the left side  
lhs_assists - AST - Assisted tackles on the left side  

### Right-Hand Side (RHS) Metrics
rhs_pass_rush_snaps - PRSH - Pass rush snaps on the right side  
rhs_pass_rush_percent - RSH% - Percentage of pass rush snaps on the right side  
rhs_pressures - DPR - Total pressures generated on the right side  
rhs_prp - PRP - Pass rushing productivity on the right side  
rhs_sacks - SK - Sacks on the right side  
rhs_hits - HIT - QB hits on the right side  
rhs_hurries - HUR - QB hurries on the right side  
rhs_misses - MIS - Missed pressures on the right side  
rhs_stops - STOP - Defensive stops on the right side  
rhs_tackles - TKL - Tackles on the right side  
rhs_assists - AST - Assisted tackles on the right side  


# Special Teams Reports
## Special Teams Grades
```{r}
special_teams_grades <- read_csv("yearly_data/2015/special_teams_summary.csv")
print("Special Teams Grades Columns:")
print(colnames(special_teams_grades))
```

## PFF Data Dictionary - Special Teams Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Snap Counts
snap_counts_field_goal - FGK - Snaps where kicking a field goal or PAT  
snap_counts_field_goal_blocking - FGBLK - Snaps where rushing/blocking a field goal or PAT  
snap_counts_kickoff - KCOV - Snaps where hunting down kickoff returners  
snap_counts_kickoff_return - KRET - Snaps where returning the ball on a kickoff  
snap_counts_punt_coverage - PCOV - Snaps where hunting down punt returners  
snap_counts_punt_return - PRET - Snaps where returning the ball on a punt  

### Tackling Metrics
tackles - TKL - Total tackles on special teams  
assists - AST - Assisted tackles on special teams  
missed_tackles - MIS - Missed tackles on special teams  

### Grades
grades_misc_st - SPEC - PFF grade for miscellaneous special teams plays  
grades_fgep_kicker - FG - PFF grade for the kicker on field goals and PATs  
grades_fgep_defense - FGK - PFF grade for the defense on field goal and PAT attempts  
grades_fgep_offense - FGK - PFF grade for the offense on field goal and PAT attempts  
grades_kickoff_kicker - KOFF - PFF grade for the kicker on kickoffs  
grades_kick_return - KRET - PFF grade for kickoff returns  
grades_punter - PUNT - PFF grade for the punter  
grades_punt_return - PRET - PFF grade for punt returns  
grades_long_snap - SNAP - PFF grade for the long snapper  
grades_special_teams_penalty - PEN - PFF grade for special teams penalties  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  

## Field Goal Grades
```{r}
field_goals_grades <- read_csv("yearly_data/2015/field_goal_summary.csv")
print("Field Goal Grades Columns:")
print(colnames(field_goals_grades))
```

## PFF Data Dictionary - Field Goal Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Field Goal Metrics
twenty_attempts - FGA (20-29) - Field goal attempts from 20-29 yards  
twenty_made - FG (20-29) - Field goals made from 20-29 yards  
twenty_percent - FG% (20-29) - Field goal percentage from 20-29 yards  

thirty_attempts - FGA (30-39) - Field goal attempts from 30-39 yards  
thirty_made - FG (30-39) - Field goals made from 30-39 yards  
thirty_percent - FG% (30-39) - Field goal percentage from 30-39 yards  

forty_attempts - FGA (40-49) - Field goal attempts from 40-49 yards  
forty_made - FG (40-49) - Field goals made from 40-49 yards  
forty_percent - FG% (40-49) - Field goal percentage from 40-49 yards  

fifty_attempts - FGA (50+) - Field goal attempts from 50+ yards  
fifty_made - FG (50+) - Field goals made from 50+ yards  
fifty_percent - FG% (50+) - Field goal percentage from 50+ yards  

total_attempts - FGA - Total field goal attempts  
total_made - FG - Total field goals made  
total_percent - FG% - Total field goal percentage  

### PAT (Point After Touchdown) Metrics
pat_attempts - XPA - Points after touchdown attempts  
pat_made - XP - Points after touchdown made  
pat_percent - XP% - Points after touchdown success rate  

### Grades
grades_fgep_kicker - FG - PFF grade for field goals and PATs  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  

## Kickoff Grades
```{r}
kickoff_grades <- read_csv("yearly_data/2015/kickoff_summary.csv")
print("Kickoff Grades Columns:")
print(colnames(kickoff_grades))
```

## PFF Data Dictionary - Kickoff Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Kickoff Metrics
attempts - ATT - Total kickoff attempts  
attempts_with_hangtime - ATT (Hangtime) - Kickoff attempts with recorded hangtime  
kicked_yards - YDS - Total yards kicked  
average_distance - AVG - Average distance per kickoff  
average_hangtime - AVG (Hangtime) - Average hangtime of kickoffs in seconds  
total_hangtime - Hangtime - Total hangtime of all kickoffs  
percent_returned - RET% - Percentage of kickoffs returned  
kicks_returned - RET - Total number of kickoffs returned  
return_yards - YDS (RET) - Total return yards on kickoffs  
average_yards_per_return - YPR - Average yards per kickoff return  
average_starting_field_position - AFP - Average starting field position after kickoff  
touchbacks - TB - Total number of touchbacks  
fair_catches - FC - Total number of fair catches  
onside_kicks - ONS - Total number of onside kicks  

### Grades
grades_kickoff_kicker - KOFF - PFF grade for kickoffs  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  


## Punting Grades
```{r}
punting_grades <- read_csv("yearly_data/2015/punting_summary.csv")
print("Punting Grades Columns:")
print(colnames(punting_grades))
```

## PFF Data Dictionary - Punting Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Punting Metrics
attempts - ATT - Total punt attempts  
attempts_with_hangtime - ATT (Hangtime) - Punt attempts with recorded hangtime  
yards - YDS - Total punt yardage  
average_yards_per_attempt - YPA - Average yards per punt attempt  
average_net_yards - NET - Average net yards per punt attempt  
long - LNG - Longest punt  
inside_twenties - I20 - Punts downed inside the 20-yard line  
touchbacks - TB - Total number of touchbacks  
out_of_bounds - OOB - Punts that went out of bounds  
downeds - DWN - Punts downed by the kicking team  

### Return Metrics
percent_returned - RET% - Percentage of punts returned  
returns - RET - Total number of punts returned  
return_yards - YDS (RET) - Total return yards on punts  
average_yards_per_return - YPR - Average yards per punt return  

### Hangtime Metrics
average_hangtime - AVG (Hangtime) - Average hangtime of punts in seconds  
total_hangtime - Hangtime - Total hangtime of all punts  

### Blocking Metrics
blocks - BLK - Total punts blocked  

### Fair Catches
fair_catches - FC - Total number of fair catches  

### Grades
grades_punter - PUNT - PFF grade for punting  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  


## Kickoff and Punt Return Grades
```{r}
kickoff_and_punt_return_grades <- read_csv("yearly_data/2015/return_summary.csv")
print("Kickoff and Punt Return Grades Columns:")
print(colnames(kickoff_and_punt_return_grades))
```

## PFF Data Dictionary - Kickoff and Punt Return Grades

### Base Information
player - Player - Full name of the player  
player_id - ID - Unique identifier for the player  
position - POS - Player's primary position during the season  
team_name - Team - NFL team name  
franchise_id - Franchise ID - Unique identifier for the NFL franchise  
player_game_count - #G - Number of games in which the player appeared  

### Kickoff Return Metrics
kickoff_attempts - RTN (Kickoff) - Total kickoff return attempts  
kickoff_yards - YDS (Kickoff) - Total kickoff return yards  
kickoff_ypa - YPA (Kickoff) - Average yards per kickoff return attempt  
kickoff_long - LNG (Kickoff) - Longest kickoff return  
kickoff_touchdowns - TD (Kickoff) - Total touchdowns scored on kickoff returns  
kickoff_fair_catches - FC (Kickoff) - Total fair catches on kickoff returns  
kickoff_muffed_returns - MUF (Kickoff) - Total muffed kickoff returns  

### Punt Return Metrics
punt_attempts - RTN (Punt) - Total punt return attempts  
punt_yards - YDS (Punt) - Total punt return yards  
punt_ypa - YPA (Punt) - Average yards per punt return attempt  
punt_long - LNG (Punt) - Longest punt return  
punt_touchdowns - TD (Punt) - Total touchdowns scored on punt returns  
punt_fair_catches - FC (Punt) - Total fair catches on punt returns  
punt_muffed_returns - MUF (Punt) - Total muffed punt returns  

### Combined Return Metrics
total_attempts - RTN - Total kickoff and punt return attempts  

### Grades
grades_kick_return - KRTN - PFF grade for kickoff returns  
grades_punt_return - PRTN - PFF grade for punt returns  
grades_return - RETN - PFF grade for combined kickoff and punt returns  

### Penalties
penalties - PEN - Total penalties  
declined_penalties - PEN (Declined) - Number of declined or offsetting penalties  



# Column Analysis Summary
```{r}
# Create list of all dataframes with their names
all_dfs <- list(
  "passing_grades" = passing_grades,
  "passing_depth" = passing_depth,
  "passing_pressure" = passing_pressure,
  "passing_concept" = passing_concept,
  "time_in_pocket" = time_in_pocket,
  "allowed_pressure" = allowed_pressure,
  "receiving_grades" = receiving_grades,
  "receiving_depth" = receiving_depth,
  "receiving_concept" = receiving_concept,
  "receiving_vs_scheme" = receiving_vs_scheme,
  "rushing_grades" = rushing_grades,
  "blocking_grades" = blocking_grades,
  "pass_blocking" = pass_blocking,
  "run_blocking" = run_blocking,
  "defensive_grades" = defensive_grades,
  "pass_rush_grades" = pass_rush_grades,
  "run_defense_grades" = run_defense_grades,
  "coverage_grades" = coverage_grades,
  "coverage_schemes" = coverage_schemes,
  "slot_coverage" = slot_coverage,
  "pass_rushing_productivity" = pass_rushing_productivity,
  "special_teams_grades" = special_teams_grades,
  "field_goals_grades" = field_goals_grades,
  "kickoff_grades" = kickoff_grades,
  "punting_grades" = punting_grades,
  "kickoff_and_punt_return_grades" = kickoff_and_punt_return_grades
)

# Create a dataframe showing which columns appear in which reports
column_summary <- data.frame(
  column_name = character(),
  appears_in = character(),
  num_reports = numeric(),
  stringsAsFactors = FALSE
)

# For each unique column name across all dataframes
unique_cols <- unique(unlist(lapply(all_dfs, colnames)))

for(col in unique_cols) {
  # Find which reports contain this column
  reports_with_col <- names(all_dfs)[sapply(all_dfs, function(df) col %in% colnames(df))]
  
  # Add to summary dataframe
  column_summary <- rbind(column_summary, 
                         data.frame(
                           column_name = col,
                           appears_in = paste(reports_with_col, collapse = ", "),
                           num_reports = length(reports_with_col),
                           stringsAsFactors = FALSE
                         ))
}

# Sort by number of reports (descending) and alphabetically by column name
column_summary <- column_summary %>%
  arrange(desc(num_reports), column_name)

# Print the final summary
print("\nColumn Summary:")
print(column_summary, row.names = FALSE)
```

get the colsum of num_reports col in column summary

```{r}
sum(column_summary[,3])
```


# first look

```{r}
library(data.table)
cypff_stats <- fread("cypff_stats.csv.gz")
```

```{r}
# Clean blank values while respecting data types
cypff_stats[, (names(cypff_stats)) := lapply(.SD, function(x) {
  if(is.character(x)) {
    fifelse(x == "", NA_character_, x)
  } else if(is.numeric(x)) {
    x  # leave numeric as-is
  } else {
    x  # leave other types as-is
  }
})]
```


```{r}
# Load required libraries
library(data.table)

# Get position columns except kickoff summary
position_cols <- grep("position", names(cypff_stats), value = TRUE, ignore.case = TRUE)
position_cols <- position_cols[!grepl("kickoff_summary_average_starting_field_position", position_cols)]

# Create new dataset with NA position column
position_data <- cypff_stats[, ..position_cols]
position_data[, position := NA_character_]
setcolorder(position_data, c("position", position_cols))

# Fill position column row by row with first valid value
for(i in 1:nrow(position_data)) {
  row_values <- unlist(position_data[i, ..position_cols])
  valid_values <- row_values[!is.na(row_values) & 
                            row_values != "" & 
                            row_values != "NA" & 
                            row_values != "NaN" &
                            grepl("[A-Za-z]", row_values)]
  if(length(valid_values) > 0) {
    position_data[i, position := valid_values[1]]
  }
}


# Show unique positions and their counts
print("Unique positions:")
print(position_data[!is.na(position), .(count = .N), by = position][order(-count)])
```


```{r}


# Add position column to main dataset
position_cols <- grep("position", names(cypff_stats), value = TRUE, ignore.case = TRUE)
position_cols <- position_cols[!grepl("kickoff_summary_average_starting_field_position", position_cols)]

# Add and fill position column
cypff_stats[, position := NA_character_]
for(i in 1:nrow(cypff_stats)) {
  row_values <- unlist(cypff_stats[i, ..position_cols])
  valid_values <- row_values[!is.na(row_values) & 
                            row_values != "" & 
                            row_values != "NA" & 
                            row_values != "NaN" &
                            grepl("[A-Za-z]", row_values)]
  if(length(valid_values) > 0) {
    cypff_stats[i, position := valid_values[1]]
  }
}

# Split into position-specific datasets
QB <- cypff_stats[position == "QB"]
WR <- cypff_stats[position == "WR"]
CB <- cypff_stats[position == "CB"]
LB <- cypff_stats[position == "LB"]
DI <- cypff_stats[position == "DI"]
ED <- cypff_stats[position == "ED"]
S <- cypff_stats[position == "S"]
HB <- cypff_stats[position == "HB"]
T <- cypff_stats[position == "T"]
TE <- cypff_stats[position == "TE"]
G <- cypff_stats[position == "G"]
C <- cypff_stats[position == "C"]
K <- cypff_stats[position == "K"]
P <- cypff_stats[position == "P"]
LS <- cypff_stats[position == "LS"]
FB <- cypff_stats[position == "FB"]
ST <- cypff_stats[position == "ST"]

# Print dimensions of each dataset
for(pos in c("QB", "WR", "CB", "LB", "DI", "ED", "S", "HB", "T", "TE", "G", "C", "K", "P", "LS", "FB", "ST")) {
    cat(sprintf("%s: %d rows\n", pos, nrow(get(pos))))
}
```

```{r}
library(DataExplorer)

positions <- c("QB", "WR", "CB", "LB", "DI", "ED", "S", "HB", 
              "T", "TE", "G", "C", "K", "P", "LS", "FB", "ST")

for(pos in positions) {
  data <- get(pos)
  
  # Calculate NA percentage per column
  na_pct <- colMeans(is.na(data))
  
  # Keep only columns with less than 50% NAs
  data_filtered <- data[, which(na_pct < 0.5), with=FALSE]
  
  cat("\n===", pos, "Analysis (Columns <50% NA) ===\n")
  introduce(data_filtered)
  plot_missing(data_filtered)
}
```

